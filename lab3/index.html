<!DOCTYPE html>
<html>
<head>
    <title>ЛР №3</title>
    <style>
        body {
            font-size: 20px;
            font-family: Arial, Helvetica, sans-serif;
        }

        .content {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .friend {
            padding: 10px;
            text-decoration: none;
            color: black;
        }

        .city {
            color: gray;
        }

        button {
            margin: 10px;
            padding: 5px;

        }
    </style>
</head>

<body>
    <script src="./jquery.js"></script>
    <script>
        $(document).ready(function () {
            const api_key = "61770d2861770d2861770d2806625c3fae6617761770d2806b770b321982d903f6d1668"
            const user_id = '199724269'
            let maxlen = 10
            let load = () => {

                $.getJSON({
                    url: `https://api.vk.com/method/friends.get?user_id=${user_id}&access_token=${api_key}&fields=city,status&v=5.81`,
                    jsonp: "callback",
                    dataType: "jsonp",
                    success: function(data) {
                        console.log(data)
                        const friends = data.response.items
                        let i = 0
                        friends.forEach(friend => {
                            if (i < maxlen) {
                                let city =  friend.city ? friend.city.title : "не указан"
                                $('.friends-list').append(`
                                    <a class="friend" href='https://vk.com/id${friend.id}''>
                                        <div class="name">${friend.first_name} ${friend.last_name}</div>
                                        <div class="city">${city}</div>
                                    </a>
                                `);
                                i++
                            }
                        });
                    }
    
                })
            }

            load()

            $("button").click(function () {
                maxlen += 10
                load()
            })
        })
    </script>

    <div class="list">

        <div class="content">
            <div class="friends-list"></div>
        </div>
        <button class="">Click</button>
    </div>
</body>

</html>